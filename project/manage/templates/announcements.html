{% extends "layout.html" %}

{% block content %}
{% include 'competition.html' %}
  <div class="container-fluid col-8" align="center" style="width: 90%">
    <div class="container-fluid" align="left" style="margin-top: 5px">
      <table style="width:100%">
        {% for post in announcements %}
          <tr style="text-align:left">
            <td>
              <h3 style="padding-left: 10px">{{ post.title }}</h3>
              <h4 style="padding-left: 20px">{{ post.body }}</h4>
              <h6 style="float: right">{{ post.time_created }}  </h6>
            </td>
          </tr>
        {% endfor %}
      </table>
    </div>
    {% if comp.organizer_id == current_user.wca_id %} <!-- Checks if user is the event organizer -->
      <form action="{{ url_for('manage.manage') }}/{{comp.comp_id}}/announcements" method="POST">
        {{ form.hidden_tag() }}
        <div class="form-group">
          {{ form.title.label }}
          {% if form.title.errors %}
          <div class="alert alert-danger">
            {% for error in form.title.errors %}
              {{ error }}
            {% endfor %}
          </div>
          {% endif %}

          {{ form.title(class="form-control") }}
        </div>

        <div class="form-group">
          {{ form.body.label }}
          {% if form.body.errors %}
          <div class="alert alert-danger">
            {% for error in form.body.errors %}
              {{ error }}
            {% endfor %}
          </div>
          {% endif %}

          {{ form.body(class="form-control") }}
        </div>

        {{ form.submit(class="btn btn-primary") }}
      </form>
    {% endif %}

  </div>
{% endblock %}
